# CH01.ë””ìì¸ íŒ¨í„´ (p16 ~ p28)

í‚¤ì›Œë“œ: ì‹±ê¸€í†¤íŒ¨í„´, íŒ©í† ë¦¬íŒ¨í„´
Date: May 6, 2024
ì¶œì²˜: ë©´ì ‘ì„ ìœ„í•œ CS ì „ê³µì§€ì‹ ë…¸íŠ¸

<aside>
ğŸ’¡ ìš©ì–´

- ë¼ì´ë¸ŒëŸ¬ë¦¬
    - ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” íŠ¹ì • ê¸°ëŠ¥ë“¤ì„ ëª¨ë“ˆí™”í•œ ê²ƒ.
    - í”„ë ˆì„ì›Œí¬ì— ë¹„í•´ ê·œì¹™ì— ìˆì–´ ììœ ë¡­ë‹¤.
- í”„ë ˆì„ì›Œí¬
    - ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” íŠ¹ì • ê¸°ëŠ¥ë“¤ì„ ëª¨ë“ˆí™”í•œ ê²ƒ.
    - ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ë¹„í•´ ê·œì¹™ì´ ì¢€ ë” ì—„ê²©í•˜ë‹¤.
</aside>

## ë””ìì¸ íŒ¨í„´ì´ë€?

- í”„ë¡œê·¸ëœ ì„¤ê³„ ì‹œ ì§ë©´í•œ ë¬¸ì œë“¤ì— ëŒ€í•´ ê°ì²´ ê°„ ìƒí˜¸ ê´€ê³„ë“¤ì„ ì‚¬ìš©í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆë„ë¡ ì •ì˜í•œ ì¼ì •ì˜ ê·œì•½

## ì‹±ê¸€í†¤ íŒ¨í„´

- **ì‹±ê¸€í†¤ íŒ¨í„´(Singleton Pattern)**ì´ë€ ?
    - í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì— ì˜¤ì§ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë§Œ ê°€ì§€ëŠ” íŒ¨í„´
    - ë³´í†µ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ëª¨ë“ˆì—ì„œ ë§ì´ ì‚¬ìš©í•œë‹¤.
    - ì¥ì  : ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹œ ë“œëŠ” ë¹„ìš©ì´ ì¤„ì–´ë“¦.
    - ë‹¨ì  : ì˜ì¡´ì„±ì´ ë†’ì•„ì§ â†’ TDD í•  ë•Œ ë¬¸ì œ
        - ë³´ì™„ ë°©ë²• â†’ **â€œì˜ì¡´ì„± ì£¼ì… (DI, Dependency Injection)**
            - ì¤‘ê°„ì— **ì˜ì¡´ì„± ì£¼ì…ì(dependency injector)**ë¥¼ í†µí•´ ë©”ì¸ ëª¨ë“ˆì´ í•˜ìœ„ ëª¨ë“ˆì— ê°„ì ‘ì ìœ¼ë¡œ ì˜ì¡´ì„±ì„ ì£¼ì…í•  ìˆ˜ ìˆê²Œ í•œë‹¤.
            - ì›ì¹™ â†’ â€œìƒìœ„ ëª¨ë“ˆì€ í•˜ìœ„ ëª¨ë“ˆì—ì„œ ì–´ë– í•œ ê²ƒë„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìœ¼ë©°, ë‘˜ ë‹¤ ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ í•œë‹¤.â€
            - ì¥ì  : í…ŒìŠ¤íŒ…, ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ìˆ˜ì›”. êµ¬í˜„ì‹œ ì¶”ìƒí™” ë ˆì´ì–´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ì²´ë¥¼ ë„£ì–´ì£¼ê¸° ë•Œë¬¸ì— ì˜ì¡´ì„± ë°©í–¥ì´ ì¼ê´€ë˜ë©°, ì¶”ë¡ ì´ ì‰½ë‹¤.
            - ë‹¨ì  : í´ë˜ìŠ¤ ìˆ˜ê°€ ëŠ˜ì–´ë‚˜ ë³µì¡ì„±ì´ ì¦ê°€ë  ìˆ˜ ìˆìŒ, ëŸ°íƒ€ì„ í˜ë„í‹°.
- Java ì½”ë“œë¡œ Singleton êµ¬í˜„í•˜ê¸°
    - private ìƒì„±ìë§Œ ì •ì˜í•˜ì—¬ ì™¸ë¶€ í´ë˜ìŠ¤ë¡œë¶€í„° ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì°¨ë‹¨
    - ì‹±ê¸€í†¤ì„ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ ë‚´ë¶€ ë©¤ë²„ ë³€ìˆ˜ë¡œ private static ê°ì²´ ë³€ìˆ˜ë¥¼ ë§Œë“¤ ê²ƒ
    - public static ë©”ì†Œë“œë¥¼ í†µí•´ ì™¸ë¶€ì—ì„œ ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•¨
        
        ë°©ë²• 1ï¸âƒ£. **ë‹¨ìˆœ ë©”ì„œë“œ í˜¸ì¶œ**
        
        ```java
        public class Singleton {
            private static Singleton instance;
            
            private Singleton() {}
        
            public static Singleton getInstance() {
                if (instance == null) {
                    instance = new Singleton();
                }
                return instance;
            }
        }
        ```
        
        â‡’ ê·¸ëŸ¬ë‚˜ ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ìˆœì°¨ì ìœ¼ë¡œ ê°ì²´ ìƒì„±ì´ ì•ˆ ì´ë¤„ì§ˆ ìˆ˜ê°€ ìˆë‹¤. 
        
        ë°©ë²• 2ï¸âƒ£. **Synchronized**
        
        ```java
        public class Singleton {
            private static Singleton instance;
        
            private Singleton() {}
        
            public static synchronized Singleton getInstance() {
                if (instance == null) {
                    instance = new Singleton();
                }
                return instance;
            }
        }
        ```
        
        â‡’ 1ë²ˆ ë°©ë²• ë³´ì™„ì„ ìœ„í•´ Synchronized í‚¤ì›Œë“œë¡œ ì ê¸ˆ â‡’ ì¦‰, ìµœì´ˆ ì ‘ê·¼í•œ ìŠ¤ë ˆë“œê°€ getInstance() ë©”ì„œë“œ í˜¸ì¶œì‹œ ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡ lockì„ ê±¸ì–´ë‘”ë‹¤. ê·¸ëŸ¬ë‚˜ ì´ëŠ” ì„±ëŠ¥ ì €í•˜ ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤. 
        
        ë°©ë²• 3ï¸âƒ£. **Static(ì •ì  ë©¤ë²„)**
        
        ```java
        public class Singleton {
            private static final Singleton instance = new Singleton();
        
            private Singleton() {}
        
            public static synchronized Singleton getInstance() {
                return instance;
            }
        }
        ```
        
        â‡’ 2ë²ˆ ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ë“±ì¥. JVM í´ë˜ìŠ¤ ë¡œë”©ê³¼ ë™ì‹œì— ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±. ê·¸ëŸ¬ë‚˜ í•„ìš”ì—†ëŠ” ê²½ìš°ì—ë„ í˜¸ì¶œí•˜ì—¬ ìì› ë‚­ë¹„ê°€ ë°œìƒ.
        
        ë°©ë²• 4ï¸âƒ£. **Static(ì •ì ë©¤ë²„) + Lazy Holder(ì¤‘ì²© í´ë˜ìŠ¤)** â‡’ ë³´í¸ì ì¸ ë°©ë²•
        
        ```java
        class Singleton {
            private static class singleInstanceHolder {
                private static final Singleton ISTANCE = new Singleton();
            }
        
            public static Singleton getInstance() {
                return singleInstanceHolder.ISTANCE;
            }
        }
        
        // mainì—ì„œ singleton.getInstance()ë¡œ í˜¸ì¶œ
        ```
        
        - ëª¨ë“ˆì´ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì •ì  ë©¤ë²„ë¡œ ì„ ì–¸ â†’ ìì› ë‚­ë¹„ ë¬¸ì œ í•´ê²°
        - ê·¸ì™¸ 3ê°€ì§€ ë°©ë²•ì´ ë” ì¡´ì¬í•¨ â†’ ì¶”í›„ ê³µë¶€í›„ ì¶”ê°€ ì˜ˆì •

## íŒ©í† ë¦¬ íŒ¨í„´

- **íŒ©í† ë¦¬ íŒ¨í„´(Factory Pattern)**ì´ë€?
    - ê°ì²´ ìƒì„± ë¶€ë¶„ì„ ë–¼ì–´ë‚´ ì¶”ìƒí™”í•œ íŒ¨í„´ì´ë©°, ìƒì† ê´€ê³„ì—ì„œ ìƒìœ„ í´ë˜ìŠ¤ê°€ ë¼ˆëŒ€ë¥¼ ê²°ì •í•˜ê³ , í•˜ìœ„ í´ë˜ìŠ¤ê°€ ê°ì²´ ìƒì„±ì— ê´€í•œ êµ¬ì²´ì ì¸ êµ¬í˜„ ë¶€ë¶„ì„ ë‹´ë‹¹í•˜ëŠ” íŒ¨í„´ì´ë‹¤.
    - ì¥ì  : ëŠìŠ¨í•œ ê²°í•¨ â†’ ìœ ì—°ì„± í™•ë³´, ìœ ì§€ë³´ìˆ˜ ìˆ˜ì›”
- Java ì½”ë“œë¡œ êµ¬í˜„í•˜ê¸°
    - Coffe.java
        
        ```java
        abstract class Coffee{
            public abstract int getPrice();
        }
        ```
        
    - Latte.java
        
        ```java
        public class Latte extends Coffee {
            private int price;
        
            public Latte(int price) {
                this.price = price;
            }
        
            @Override
            public int getPrice() {
                return this.price;
            }
        }
        ```
        
    - Americano.java
        
        ```java
        public class Americano extends Coffee {
            private int price;
        
            public Americano(int price) {
                this.price = price;
            }
        
            @Override
            public int getPrice() {
                return this.price;
            }
        }
        ```
        
    - CoffeFactory.java
        
        ```java
        public class CoffeFactory {
            public Coffee getCoffee(String type, int price) {
                
                if (type == null) return null;
                
                if ("Latte".equalsIgnoreCase(type)) return new Latte(price);
                else if ("Americano".equalsIgnoreCase(type)) return new Americano(price);
            }
        }
        ```
        
        equalsIgnoreCase â†’ ëŒ€ì†Œë¬¸ì êµ¬ë¶„ ì•ˆ í•˜ê³  ë¹„êµ
